{"version":3,"file":"sdk-js.global.min.js","sources":["../src/handlers/items.ts","../src/handlers/server.ts","../src/handlers/utils.ts","../src/handlers/activity.ts","../src/handlers/folders.ts","../src/handlers/permissions.ts","../src/handlers/presets.ts","../src/handlers/relations.ts","../src/handlers/revisions.ts","../src/handlers/roles.ts","../src/handlers/users.ts","../src/handlers/settings.ts","../src/handlers/files.ts","../src/handlers/collections.ts","../src/handlers/fields.ts","../src/handlers/auth.ts","../src/utils/memory-store.ts","../src/index.ts"],"sourcesContent":["import { Query, Item, Payload, Response, PrimaryKey } from '../types';\nimport { AxiosInstance } from 'axios';\n\nexport class ItemsHandler {\n\taxios: AxiosInstance;\n\tprivate endpoint: string;\n\n\tconstructor(collection: string, axios: AxiosInstance) {\n\t\tthis.axios = axios;\n\t\tthis.endpoint = collection.startsWith('directus_')\n\t\t\t? `/${collection.substring(9)}/`\n\t\t\t: `/items/${collection}/`;\n\t}\n\n\tasync create<T extends Item>(payload: Payload, query?: Query): Promise<Response<T>>;\n\tasync create<T extends Item>(payloads: Payload[], query?: Query): Promise<Response<T[]>>;\n\tasync create<T extends Item>(\n\t\tpayloads: Payload | Payload[],\n\t\tquery?: Query\n\t): Promise<Response<T | T[]>> {\n\t\tconst result = await this.axios.post(this.endpoint, payloads, {\n\t\t\tparams: query,\n\t\t});\n\n\t\treturn result.data;\n\t}\n\n\tasync read<T extends Item>(): Promise<Response<T | T[]>>;\n\tasync read<T extends Item>(query: Query & { single: true }): Promise<Response<T>>;\n\tasync read<T extends Item>(query: Query): Promise<Response<T | T[]>>;\n\tasync read<T extends Item>(key: PrimaryKey, query?: Query): Promise<Response<T>>;\n\tasync read<T extends Item>(keys: PrimaryKey[], query?: Query): Promise<Response<T | T[]>>;\n\tasync read<T extends Item>(\n\t\tkeysOrQuery?: PrimaryKey | PrimaryKey[] | Query,\n\t\tquery?: Query & { single: boolean }\n\t): Promise<Response<T | T[]>> {\n\t\tlet keys: PrimaryKey | PrimaryKey[] | null = null;\n\n\t\tif (\n\t\t\tkeysOrQuery &&\n\t\t\t(Array.isArray(keysOrQuery) ||\n\t\t\t\ttypeof keysOrQuery === 'string' ||\n\t\t\t\ttypeof keysOrQuery === 'number')\n\t\t) {\n\t\t\tkeys = keysOrQuery;\n\t\t}\n\n\t\tlet params: Query = {};\n\n\t\tif (query) {\n\t\t\tparams = query;\n\t\t} else if (\n\t\t\t!query &&\n\t\t\ttypeof keysOrQuery === 'object' &&\n\t\t\tArray.isArray(keysOrQuery) === false\n\t\t) {\n\t\t\tparams = keysOrQuery as Query;\n\t\t}\n\n\t\tlet endpoint = this.endpoint;\n\n\t\tif (keys) {\n\t\t\tendpoint += keys;\n\t\t}\n\n\t\tconst result = await this.axios.get(endpoint, { params });\n\n\t\treturn result.data;\n\t}\n\n\tasync update<T extends Item>(\n\t\tkey: PrimaryKey,\n\t\tpayload: Payload,\n\t\tquery?: Query\n\t): Promise<Response<T>>;\n\tasync update<T extends Item>(\n\t\tkeys: PrimaryKey[],\n\t\tpayload: Payload,\n\t\tquery?: Query\n\t): Promise<Response<T[]>>;\n\tasync update<T extends Item>(payload: Payload[], query?: Query): Promise<Response<T[]>>;\n\tasync update<T extends Item>(payload: Payload, query: Query): Promise<Response<T[]>>;\n\tasync update<T extends Item>(\n\t\tkeyOrPayload: PrimaryKey | PrimaryKey[] | Payload | Payload[],\n\t\tpayloadOrQuery?: Payload | Query,\n\t\tquery?: Query\n\t): Promise<Response<T | T[]>> {\n\t\tif (\n\t\t\ttypeof keyOrPayload === 'string' ||\n\t\t\ttypeof keyOrPayload === 'number' ||\n\t\t\t(Array.isArray(keyOrPayload) &&\n\t\t\t\t(keyOrPayload as any[]).every((key) => ['string', 'number'].includes(typeof key)))\n\t\t) {\n\t\t\tconst key = keyOrPayload as PrimaryKey | PrimaryKey[];\n\t\t\tconst payload = payloadOrQuery as Payload;\n\n\t\t\tconst result = await this.axios.patch(`${this.endpoint}${key}`, payload, {\n\t\t\t\tparams: query,\n\t\t\t});\n\t\t\treturn result.data;\n\t\t} else {\n\t\t\tconst result = await this.axios.patch(`${this.endpoint}`, keyOrPayload, {\n\t\t\t\tparams: payloadOrQuery,\n\t\t\t});\n\n\t\t\treturn result.data;\n\t\t}\n\t}\n\n\tasync delete(key: PrimaryKey): Promise<void>;\n\tasync delete(keys: PrimaryKey[]): Promise<void>;\n\tasync delete(keys: PrimaryKey | PrimaryKey[]): Promise<void> {\n\t\tawait this.axios.delete(`${this.endpoint}${keys}`);\n\t}\n}\n","import { AxiosInstance } from 'axios';\nimport type { OpenAPIObject } from 'openapi3-ts';\n\nexport type ServerInfo = {\n\tproject: {\n\t\tproject_name: string;\n\t\tproject_logo: string | null;\n\t\tproject_color: string | null;\n\t\tpublic_foreground: string | null;\n\t\tpublic_background: string | null;\n\t\tpublic_note: string | null;\n\t\tcustom_css: null;\n\t};\n\tdirectus?: { version: string };\n\tnode?: { uptime: number; version: string };\n\tos?: { totalmem: number; type: string; uptime: number; version: string };\n};\n\nexport class ServerHandler {\n\tprivate axios: AxiosInstance;\n\n\tconstructor(axios: AxiosInstance) {\n\t\tthis.axios = axios;\n\t}\n\n\tspecs = {\n\t\toas: async (): Promise<OpenAPIObject> => {\n\t\t\tconst result = await this.axios.get('/server/specs/oas');\n\t\t\treturn result.data;\n\t\t},\n\t};\n\n\tasync ping(): Promise<'pong'> {\n\t\tawait this.axios.get('/server/ping');\n\t\treturn 'pong';\n\t}\n\n\tasync info(): Promise<{ data: ServerInfo }> {\n\t\tconst result = await this.axios.get('/server/info');\n\t\treturn result.data;\n\t}\n}\n","import { AxiosInstance } from 'axios';\nimport { PrimaryKey } from '../types';\n\nexport class UtilsHandler {\n\tprivate axios: AxiosInstance;\n\n\tconstructor(axios: AxiosInstance) {\n\t\tthis.axios = axios;\n\t}\n\n\trandom = {\n\t\tstring: async (length: number = 32): Promise<{ data: string }> => {\n\t\t\tconst result = await this.axios.get('/utils/random/string', { params: { length } });\n\t\t\treturn result.data;\n\t\t},\n\t};\n\n\thash = {\n\t\tgenerate: async (string: string): Promise<{ data: string }> => {\n\t\t\tconst result = await this.axios.post('/utils/hash/generate', { string });\n\t\t\treturn result.data;\n\t\t},\n\t\tverify: async (string: string, hash: string): Promise<{ data: boolean }> => {\n\t\t\tconst result = await this.axios.post('/utils/hash/verify', { string, hash });\n\t\t\treturn result.data;\n\t\t},\n\t};\n\n\tasync sort(collection: string, item: PrimaryKey, to: PrimaryKey): Promise<void> {\n\t\tawait this.axios.post(`/utils/sort/${collection}`, { item, to });\n\t}\n\n\tasync revert(revision: PrimaryKey): Promise<void> {\n\t\tawait this.axios.post(`/utils/revert/${revision}`);\n\t}\n}\n","import { AxiosInstance } from 'axios';\nimport { ItemsHandler } from './items';\nimport { Query, PrimaryKey, Item, Response } from '../types';\n\nexport class ActivityHandler {\n\tprivate axios: AxiosInstance;\n\tprivate itemsHandler: ItemsHandler;\n\n\tconstructor(axios: AxiosInstance) {\n\t\tthis.axios = axios;\n\t\tthis.itemsHandler = new ItemsHandler('directus_activity', axios);\n\t}\n\n\tasync read<T extends Item>(query?: Query): Promise<Response<T | T[]>>;\n\tasync read<T extends Item>(key: PrimaryKey, query?: Query): Promise<Response<T>>;\n\tasync read<T extends Item>(keys: PrimaryKey[], query?: Query): Promise<Response<T | T[]>>;\n\tasync read<T extends Item>(\n\t\tkeysOrQuery?: PrimaryKey | PrimaryKey[] | Query,\n\t\tquery?: Query & { single: boolean }\n\t): Promise<Response<T | T[]>> {\n\t\tconst result = await this.itemsHandler.read<T>(keysOrQuery as any, query as any);\n\t\treturn result;\n\t}\n\n\tcomments = {\n\t\tcreate: async (payload: { collection: string; item: string; comment: string }): Promise<Response<Item>> => {\n\t\t\tconst response = await this.axios.post('/activity/comments', payload);\n\t\t\treturn response.data;\n\t\t},\n\t\tupdate: async (key: PrimaryKey, payload: { comment: string }): Promise<{ data: Item | null }> => {\n\t\t\tconst response = await this.axios.patch(`/activity/comments/${key}`, payload);\n\t\t\treturn response.data;\n\t\t},\n\t\tdelete: async (key: PrimaryKey): Promise<void> => {\n\t\t\tawait this.axios.delete(`/activity/comments/${key}`);\n\t\t},\n\t};\n}\n","import { AxiosInstance } from 'axios';\nimport { ItemsHandler } from './items';\n\nexport class FoldersHandler extends ItemsHandler {\n\tconstructor(axios: AxiosInstance) {\n\t\tsuper('directus_folders', axios);\n\t}\n}\n","import { AxiosInstance } from 'axios';\nimport { ItemsHandler } from './items';\n\nexport class PermissionsHandler extends ItemsHandler {\n\tconstructor(axios: AxiosInstance) {\n\t\tsuper('directus_permissions', axios);\n\t}\n}\n","import { AxiosInstance } from 'axios';\nimport { ItemsHandler } from './items';\n\nexport class PresetsHandler extends ItemsHandler {\n\tconstructor(axios: AxiosInstance) {\n\t\tsuper('directus_presets', axios);\n\t}\n}\n","import { AxiosInstance } from 'axios';\nimport { ItemsHandler } from './items';\n\nexport class RelationsHandler extends ItemsHandler {\n\tconstructor(axios: AxiosInstance) {\n\t\tsuper('directus_relations', axios);\n\t}\n}\n","import { AxiosInstance } from 'axios';\nimport { ItemsHandler } from './items';\n\nexport class RevisionsHandler extends ItemsHandler {\n\tconstructor(axios: AxiosInstance) {\n\t\tsuper('directus_revisions', axios);\n\t}\n}\n","import { AxiosInstance } from 'axios';\nimport { ItemsHandler } from './items';\n\nexport class RolesHandler extends ItemsHandler {\n\tconstructor(axios: AxiosInstance) {\n\t\tsuper('directus_roles', axios);\n\t}\n}\n","import { AxiosInstance } from 'axios';\nimport { ItemsHandler } from './items';\nimport { Query, Payload } from '../types';\n\nexport type UserInfo = {\n\tavatar: string | null;\n\tdescription: string | null;\n\temail: string;\n\tfirst_name: string | null;\n\tid: string;\n\tlanguage: string;\n\tlast_access: string;\n\tlast_name: string | null;\n\tlast_page: string;\n\tlocation: string | null;\n\tpassword: string;\n\trole: string;\n\tstatus: string;\n\ttags: string[];\n\ttfa_secret: string | null;\n\ttheme: 'auto' | 'dark' | 'light';\n\ttitle: string | null;\n\ttoken: string | null;\n};\n\nexport class UsersHandler extends ItemsHandler {\n\tconstructor(axios: AxiosInstance) {\n\t\tsuper('directus_users', axios);\n\t}\n\n\tasync invite(email: string | string[], role: string): Promise<void> {\n\t\tawait this.axios.post('/users/invite', { email, role });\n\t}\n\n\tasync acceptInvite(token: string, password: string): Promise<void> {\n\t\tawait this.axios.post('/users/invite/accept', { token, password });\n\t}\n\n\ttfa = {\n\t\tenable: async (password: string): Promise<void> => {\n\t\t\tawait this.axios.post('/users/tfa/enable', { password });\n\t\t},\n\t\tdisable: async (otp: string): Promise<void> => {\n\t\t\tawait this.axios.post('/users/tfa/disable', { otp });\n\t\t},\n\t};\n\n\tme = {\n\t\tread: async (query?: Query): Promise<{ data: Partial<UserInfo> }> => {\n\t\t\tconst response = await this.axios.get('/users/me', { params: query });\n\t\t\treturn response.data;\n\t\t},\n\t\tupdate: async (payload: Payload, query?: Query): Promise<{ data: Partial<UserInfo> }> => {\n\t\t\tconst response = await this.axios.patch('/users/me', payload, { params: query });\n\t\t\treturn response.data;\n\t\t},\n\t};\n}\n","import { AxiosInstance } from 'axios';\nimport { ItemsHandler } from './items';\n\nexport class SettingsHandler extends ItemsHandler {\n\tconstructor(axios: AxiosInstance) {\n\t\tsuper('directus_settings', axios);\n\t}\n}\n","import { AxiosInstance } from 'axios';\nimport { ItemsHandler } from './items';\n\nexport class FilesHandler extends ItemsHandler {\n\tconstructor(axios: AxiosInstance) {\n\t\tsuper('directus_files', axios);\n\t}\n}\n","import { AxiosInstance } from 'axios';\nimport { ItemsHandler } from './items';\n\nexport class CollectionsHandler extends ItemsHandler {\n\tconstructor(axios: AxiosInstance) {\n\t\tsuper('directus_collections', axios);\n\t}\n}\n","import { AxiosInstance } from 'axios';\nimport { ItemsHandler } from './items';\n\nexport class FieldsHandler extends ItemsHandler {\n\tconstructor(axios: AxiosInstance) {\n\t\tsuper('directus_fields', axios);\n\t}\n}\n","import { AxiosInstance } from 'axios';\nimport { AuthStorage } from '../types';\n\nexport type LoginCredentials = {\n\temail: string;\n\tpassword: string;\n\totp?: string;\n};\n\nexport type AuthOptions = {\n\tmode: 'cookie' | 'json';\n\tautoRefresh: boolean;\n\tstorage: AuthStorage;\n};\n\nexport type AuthResponse = {\n\taccess_token: string;\n\texpires: number;\n\trefresh_token?: string;\n};\n\nexport class AuthHandler {\n\tprivate axios: AxiosInstance;\n\tprivate storage: AuthStorage;\n\tprivate mode: 'cookie' | 'json';\n\tprivate autoRefresh: boolean;\n\n\tconstructor(axios: AxiosInstance, options: AuthOptions) {\n\t\tthis.axios = axios;\n\t\tthis.storage = options.storage;\n\t\tthis.mode = options.mode;\n\t\tthis.autoRefresh = options.autoRefresh;\n\n\t\tif (this.autoRefresh) {\n\t\t\tthis.refresh();\n\t\t}\n\t}\n\n\tget token(): string | null {\n\t\treturn this.axios.defaults.headers?.Authorization?.split(' ')[1] || null;\n\t}\n\n\tset token(val: string | null) {\n\t\tthis.axios.defaults.headers = {\n\t\t\t...(this.axios.defaults.headers || {}),\n\t\t\tAuthorization: val ? `Bearer ${val}` : undefined,\n\t\t};\n\t}\n\n\tasync login(credentials: LoginCredentials): Promise<{ data: AuthResponse }> {\n\t\tconst response = await this.axios.post<{ data: AuthResponse }>('/auth/login', {\n\t\t\t...credentials,\n\t\t\tmode: this.mode,\n\t\t});\n\n\t\tthis.token = response.data.data.access_token;\n\n\t\tif (this.mode === 'json') {\n\t\t\tawait this.storage.setItem('directus_refresh_token', response.data.data.refresh_token);\n\t\t}\n\n\t\tif (this.autoRefresh) {\n\t\t\tsetTimeout(() => this.refresh(), response.data.data.expires - 10000);\n\t\t}\n\n\t\treturn response.data;\n\t}\n\n\tasync refresh(): Promise<{ data: AuthResponse }> {\n\t\tconst payload: Record<string, any> = { mode: this.mode };\n\n\t\tif (this.mode === 'json') {\n\t\t\tconst refreshToken = await this.storage.getItem('directus_refresh_token');\n\t\t\tpayload['refresh_token'] = refreshToken;\n\t\t}\n\n\t\tconst response = await this.axios.post<{ data: AuthResponse }>('/auth/refresh', payload);\n\n\t\tthis.token = response.data.data.access_token;\n\n\t\tif (this.mode === 'json') {\n\t\t\tawait this.storage.setItem('directus_refresh_token', response.data.data.refresh_token);\n\t\t}\n\n\t\tif (this.autoRefresh) {\n\t\t\tsetTimeout(() => this.refresh(), response.data.data.expires - 10000);\n\t\t}\n\n\t\treturn response.data;\n\t}\n\n\tasync logout(): Promise<void> {\n\t\tawait this.axios.post('/auth/logout');\n\t\tthis.token = null;\n\t}\n\n\tpassword = {\n\t\trequest: async (email: string): Promise<void> => {\n\t\t\tawait this.axios.post('/auth/password/request', { email });\n\t\t},\n\n\t\treset: async (token: string, password: string): Promise<void> => {\n\t\t\tawait this.axios.post('/auth/password/reset', { token, password });\n\t\t},\n\t};\n}\n","import { AuthStorage } from '../types';\n\nexport class MemoryStore implements AuthStorage {\n\tprivate values: Record<string, any> = {};\n\n\tasync getItem<T = any>(key: string): Promise<T | undefined> {\n\t\treturn this.values[key];\n\t}\n\n\tasync setItem(key: string, value: any): Promise<void> {\n\t\tthis.values[key] = value;\n\t}\n}\n","import axios, { AxiosInstance } from 'axios';\nimport {\n\tItemsHandler,\n\tServerHandler,\n\tUtilsHandler,\n\tActivityHandler,\n\tFoldersHandler,\n\tPermissionsHandler,\n\tPresetsHandler,\n\tRolesHandler,\n\tUsersHandler,\n\tSettingsHandler,\n\tFilesHandler,\n\tCollectionsHandler,\n\tFieldsHandler,\n\tAuthHandler,\n\tRelationsHandler,\n\tAuthOptions,\n\tRevisionsHandler,\n} from './handlers';\nimport { MemoryStore } from './utils';\n\nclass DirectusSDK {\n\taxios: AxiosInstance;\n\tprivate authOptions: AuthOptions;\n\n\tconstructor(url: string, options?: { auth: Partial<AuthOptions> }) {\n\t\tthis.axios = axios.create({\n\t\t\tbaseURL: url,\n\t\t});\n\n\t\tthis.authOptions = {\n\t\t\tstorage: options?.auth?.storage !== undefined ? options.auth.storage : new MemoryStore(),\n\t\t\tmode: options?.auth?.mode !== undefined ? options.auth.mode : 'cookie',\n\t\t\tautoRefresh: options?.auth?.autoRefresh !== undefined ? options.auth.autoRefresh : false,\n\t\t};\n\t}\n\n\t// Global helpers\n\t////////////////////////////////////////////////////////////////////////////////////////////////\n\n\tget url(): string {\n\t\treturn this.axios.defaults.baseURL!;\n\t}\n\n\tset url(val: string) {\n\t\tthis.axios.defaults.baseURL = val;\n\t}\n\n\t// Handlers\n\t////////////////////////////////////////////////////////////////////////////////////////////////\n\n\titems(collection: string) {\n\t\tif (collection.startsWith('directus_')) {\n\t\t\tthrow new Error(`You can't read the \"${collection}\" collection directly.`);\n\t\t}\n\n\t\treturn new ItemsHandler(collection, this.axios);\n\t}\n\n\tget activity() {\n\t\treturn new ActivityHandler(this.axios);\n\t}\n\n\tget auth() {\n\t\treturn new AuthHandler(this.axios, this.authOptions);\n\t}\n\n\tget collections() {\n\t\treturn new CollectionsHandler(this.axios);\n\t}\n\n\tget fields() {\n\t\treturn new FieldsHandler(this.axios);\n\t}\n\n\tget files() {\n\t\treturn new FilesHandler(this.axios);\n\t}\n\n\tget folders() {\n\t\treturn new FoldersHandler(this.axios);\n\t}\n\n\tget permissions() {\n\t\treturn new PermissionsHandler(this.axios);\n\t}\n\n\tget presets() {\n\t\treturn new PresetsHandler(this.axios);\n\t}\n\n\tget relations() {\n\t\treturn new RelationsHandler(this.axios);\n\t}\n\n\tget revisions() {\n\t\treturn new RevisionsHandler(this.axios);\n\t}\n\n\tget roles() {\n\t\treturn new RolesHandler(this.axios);\n\t}\n\n\tget server() {\n\t\treturn new ServerHandler(this.axios);\n\t}\n\n\tget settings() {\n\t\treturn new SettingsHandler(this.axios);\n\t}\n\n\tget users() {\n\t\treturn new UsersHandler(this.axios);\n\t}\n\n\tget utils() {\n\t\treturn new UtilsHandler(this.axios);\n\t}\n}\n\nexport default DirectusSDK;\n"],"names":["collection","axios","this","endpoint","startsWith","substring","ItemsHandler","payloads","query","post","params","_a","data","keysOrQuery","keys","Array","isArray","get","keyOrPayload","payloadOrQuery","every","key","includes","payload","patch","delete","oas","ServerHandler","string","length","generate","verify","hash","UtilsHandler","item","to","revision","create","update","itemsHandler","ActivityHandler","read","_super","__extends","_this","enable","password","disable","otp","UsersHandler","email","role","token","options","request","reset","storage","mode","autoRefresh","refresh","Object","AuthHandler","defaults","headers","Authorization","split","val","undefined","credentials","response","access_token","setItem","refresh_token","setTimeout","expires","getItem","refreshToken","MemoryStore","values","value","url","baseURL","authOptions","auth","DirectusSDK","Error","CollectionsHandler","FieldsHandler","FilesHandler","FoldersHandler","PermissionsHandler","PresetsHandler","RelationsHandler","RevisionsHandler","RolesHandler","SettingsHandler"],"mappings":"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"}